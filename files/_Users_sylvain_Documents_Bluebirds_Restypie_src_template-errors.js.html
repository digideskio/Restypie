<!DOCTYPE html>
<html lang="en" class="yui-overrride">
<head>
    <meta charset="utf-8">
    <title>/Users/sylvain/Documents/Bluebirds/Restypie/src/template-errors.js - NodeToolkit</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1 class="blue-main-title">NodeToolkit</h1>
        </div>
        <div class="yui3-u-1-4 version project-version">
            API Docs for: 0.1.2
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Restypie.API.html">Restypie.API</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.html">Restypie.BasicRoutes</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.DeleteSingleRoute.html">Restypie.BasicRoutes.DeleteSingleRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.GetManyRoute.html">Restypie.BasicRoutes.GetManyRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.GetSingleRoute.html">Restypie.BasicRoutes.GetSingleRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.OptionsRoute.html">Restypie.BasicRoutes.OptionsRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.PatchSingleRoute.html">Restypie.BasicRoutes.PatchSingleRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.PostRoute.html">Restypie.BasicRoutes.PostRoute</a></li>
                                <li><a href="../classes/Restypie.BasicRoutes.PutSingleRoute.html">Restypie.BasicRoutes.PutSingleRoute</a></li>
                                <li><a href="../classes/Restypie.Bundle.html">Restypie.Bundle</a></li>
                                <li><a href="../classes/Restypie.Codes.html">Restypie.Codes</a></li>
                                <li><a href="../classes/Restypie.Fields.html">Restypie.Fields</a></li>
                                <li><a href="../classes/Restypie.Fields.AbstractField.html">Restypie.Fields.AbstractField</a></li>
                                <li><a href="../classes/Restypie.Fields.AbstractNumberField.html">Restypie.Fields.AbstractNumberField</a></li>
                                <li><a href="../classes/Restypie.Fields.AbstractRelationField.html">Restypie.Fields.AbstractRelationField</a></li>
                                <li><a href="../classes/Restypie.Fields.AnyField.html">Restypie.Fields.AnyField</a></li>
                                <li><a href="../classes/Restypie.Fields.BooleanField.html">Restypie.Fields.BooleanField</a></li>
                                <li><a href="../classes/Restypie.Fields.DateField.html">Restypie.Fields.DateField</a></li>
                                <li><a href="../classes/Restypie.Fields.FileField.html">Restypie.Fields.FileField</a></li>
                                <li><a href="../classes/Restypie.Fields.FloatField.html">Restypie.Fields.FloatField</a></li>
                                <li><a href="../classes/Restypie.Fields.IntegerField.html">Restypie.Fields.IntegerField</a></li>
                                <li><a href="../classes/Restypie.Fields.StringField.html">Restypie.Fields.StringField</a></li>
                                <li><a href="../classes/Restypie.Fields.ToManyField.html">Restypie.Fields.ToManyField</a></li>
                                <li><a href="../classes/Restypie.Fields.ToOneField.html">Restypie.Fields.ToOneField</a></li>
                                <li><a href="../classes/Restypie.Methods.html">Restypie.Methods</a></li>
                                <li><a href="../classes/Restypie.Operators.html">Restypie.Operators</a></li>
                                <li><a href="../classes/Restypie.Operators.AbstractListOperator.html">Restypie.Operators.AbstractListOperator</a></li>
                                <li><a href="../classes/Restypie.Operators.AbstractOperator.html">Restypie.Operators.AbstractOperator</a></li>
                                <li><a href="../classes/Restypie.Operators.Eq.html">Restypie.Operators.Eq</a></li>
                                <li><a href="../classes/Restypie.Operators.Gt.html">Restypie.Operators.Gt</a></li>
                                <li><a href="../classes/Restypie.Operators.Gte.html">Restypie.Operators.Gte</a></li>
                                <li><a href="../classes/Restypie.Operators.In.html">Restypie.Operators.In</a></li>
                                <li><a href="../classes/Restypie.Operators.Lt.html">Restypie.Operators.Lt</a></li>
                                <li><a href="../classes/Restypie.Operators.Lte.html">Restypie.Operators.Lte</a></li>
                                <li><a href="../classes/Restypie.Operators.Ne.html">Restypie.Operators.Ne</a></li>
                                <li><a href="../classes/Restypie.Operators.Nin.html">Restypie.Operators.Nin</a></li>
                                <li><a href="../classes/Restypie.Resources.html">Restypie.Resources</a></li>
                                <li><a href="../classes/Restypie.Resources.AbstractResource.html">Restypie.Resources.AbstractResource</a></li>
                                <li><a href="../classes/Restypie.Resources.FixturesResource.html">Restypie.Resources.FixturesResource</a></li>
                                <li><a href="../classes/Restypie.Resources.ProxyResource.html">Restypie.Resources.ProxyResource</a></li>
                                <li><a href="../classes/Restypie.Resources.SequelizeResource.html">Restypie.Resources.SequelizeResource</a></li>
                                <li><a href="../classes/Restypie.RestErrors.html">Restypie.RestErrors</a></li>
                                <li><a href="../classes/Restypie.RestErrors.AbstractRestError.html">Restypie.RestErrors.AbstractRestError</a></li>
                                <li><a href="../classes/Restypie.RestErrors.BadRequest.html">Restypie.RestErrors.BadRequest</a></li>
                                <li><a href="../classes/Restypie.RestErrors.Forbidden.html">Restypie.RestErrors.Forbidden</a></li>
                                <li><a href="../classes/Restypie.RestErrors.InternalServerError.html">Restypie.RestErrors.InternalServerError</a></li>
                                <li><a href="../classes/Restypie.RestErrors.NotAcceptable.html">Restypie.RestErrors.NotAcceptable</a></li>
                                <li><a href="../classes/Restypie.RestErrors.NotFound.html">Restypie.RestErrors.NotFound</a></li>
                                <li><a href="../classes/Restypie.RestErrors.NotImplemented.html">Restypie.RestErrors.NotImplemented</a></li>
                                <li><a href="../classes/Restypie.RestErrors.Unauthorized.html">Restypie.RestErrors.Unauthorized</a></li>
                                <li><a href="../classes/Restypie.RestErrors.UnsupportedMediaType.html">Restypie.RestErrors.UnsupportedMediaType</a></li>
                                <li><a href="../classes/Restypie.Route.html">Restypie.Route</a></li>
                                <li><a href="../classes/Restypie.RoutesSorter.html">Restypie.RoutesSorter</a></li>
                                <li><a href="../classes/Restypie.Serializers.html">Restypie.Serializers</a></li>
                                <li><a href="../classes/Restypie.Serializers.AbstractSerializer.html">Restypie.Serializers.AbstractSerializer</a></li>
                                <li><a href="../classes/Restypie.Serializers.JSONSerializer.html">Restypie.Serializers.JSONSerializer</a></li>
                                <li><a href="../classes/Restypie.TemplateErrors.html">Restypie.TemplateErrors</a></li>
                                <li><a href="../classes/Restypie.Url.html">Restypie.Url</a></li>
                                <li><a href="../classes/Restypie.Utils.html">Restypie.Utils</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: /Users/sylvain/Documents/Bluebirds/Restypie/src/template-errors.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x27;use strict&#x27;;

/***********************************************************************************************************************
 * Dependencies
 **********************************************************************************************************************/
let _ = require(&#x27;lodash&#x27;);

let Restypie = require(&#x27;./&#x27;);

class AbstractError extends Restypie.RestErrors.AbstractRestError {
  get name() { return this.constructor.name; }
  get statusCode() { return null; }
  constructor(meta) {
    let message = &#x27;&#x27;;
    if (_.isString(meta)) {
      message = meta;
      meta = null;
    }
    super(message, meta);

    Restypie.Utils.forceAbstract(this, AbstractError);

    if (!_.isNumber(this.statusCode)) throw new TypeError(&#x27;statusCode should be a number&#x27;);
    if (_.isPlainObject(meta)) this.message = this.constructor.template(meta);
  }

  static template(meta) {
    return JSON.stringify(meta);
  }
}

class AbstractBadRequestError extends AbstractError {
  get statusCode() { return Restypie.Codes.BadRequest; }
  constructor(meta) {
    super(meta);
    Restypie.Utils.forceAbstract(this, AbstractBadRequestError);
  }
}

class AbstractForbiddenError extends AbstractError {
  get statusCode() { return Restypie.Codes.Forbidden; }
  constructor(meta) {
    super(meta);
    Restypie.Utils.forceAbstract(this, AbstractForbiddenError);
  }
}


/***********************************************************************************************************************
 * @namespace Restypie
 * @class TemplateErrors
 **********************************************************************************************************************/
module.exports = {

  /**
   * Allow customizing an error template.
   *
   * @method overrideTemplate
   * @static
   * @param {constructor} error A subclass of &#x60;Restypie.TemplateErrors.AbstractError&#x60;
   * @param {Function} templateFunction A &#x60;meta&#x60; argument (Object) will be passed to that function.
   */
  overrideTemplate(error, templateFunction) {
    Restypie.Utils.isSubclassOf(error, AbstractError, true);
    Restypie.Utils.isInstanceOf(templateFunction, Function, true);
    error.template = templateFunction;
  },

  /**
   * Abstract class for errors.
   *
   * @property AbstractError
   * @type constructor
   * @static
   * @extends Restypie.RestError
   * @constructor
   */
  AbstractError: AbstractError,

  /**
   * Abstract class for validation errors.
   *
   * @property AbstractBadRequestError
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractError
   * @constructor
   */
  AbstractBadRequestError: AbstractBadRequestError,

  /**
   * Abstract class for authorization errors.
   *
   * @property AbstractForbiddenError
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractError
   * @constructor
   */
  AbstractForbiddenError: AbstractForbiddenError,

  /**
   * Path is required but missing.
   *
   * @property Missing
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractBadRequestError
   * @constructor
   */
  Missing: class MissingError extends AbstractBadRequestError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; is required.&#x60;;
    }
  },

  /**
   * Path is out of range.
   *
   * @property OutOfRange
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  OutOfRange: class OutOfRangeError extends AbstractForbiddenError {
    static template(meta) {
      let message = &#x60;Path &quot;${meta.key}&quot; must be&#x60;;
      let hasMin = _.isNumber(meta.min);
      let hasMax = _.isNumber(meta.max);
      if (hasMin) message += &#x60; greater than &quot;${meta.min}&quot;&#x60;;
      if (hasMin &amp;&amp; hasMax) message += &#x27; and&#x27;;
      if (hasMax) message += &#x60; smaller than &quot;${meta.max}&quot;&#x60;;
      message += &#x60;, got &quot;${meta.value}&quot;.&#x60;;
      return message;
    }
  },

  /**
   * Path doesn&#x27;t match the required type.
   *
   * @property BadType
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractBadRequestError
   * @constructor
   */
  BadType: class BadTypeError extends AbstractBadRequestError {
    static template(meta) {
      return &#x60;Expected path &quot;${meta.key}&quot; to be of type &quot;${meta.expected}&quot;, got &quot;${meta.type || typeof meta.value}&quot;.&#x60;;
    }
  },

  /**
   * Path doesn&#x27;t match the required pattern.
   *
   * @property BadPattern
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractBadRequestError
   * @constructor
   */
  BadPattern: class BadPatternError extends AbstractBadRequestError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; does not match pattern &quot;${meta.expected.toString()}&quot;&#x60;;
    }
  },

  /**
   * Expected format is not supported.
   *
   * @property UnsupportedFormat
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractError
   * @constructor
   */
  UnsupportedFormat: class UnsupportedFormatError extends AbstractError {
    get statusCode() { return Restypie.Codes.NotAcceptable; }
    static template(meta) {
      return &#x60;Expected format is not supported ; should be one of ${meta.expected.join(&#x27;, &#x27;)} ; got &quot;${meta.value}&quot;&#x60;;
    }
  },

  /**
   * The resource could not be found.
   *
   * @property ResourceNotFound
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractError
   * @constructor
   */
  ResourceNotFound: class ResourceNotFoundError extends AbstractError {
    get statusCode() { return Restypie.Codes.NotFound; }
    static template(meta) {
      return &#x60;Resource with identifier &quot;${meta.pk}&quot; could not be found&#x60;;
    }
  },

  /**
   * The path could not be found in the resource&#x27;s schema.
   *
   * @property UnknownPath
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  UnknownPath: class UnknownPathError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; could not be found on this resource&#x60;;
    }
  },

  /**
   * The path is not writable.
   *
   * @property NotWritable
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  NotWritable: class NotWritableError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; cannot be written, got &quot;${meta.value}&quot;&#x60;;
    }
  },

  /**
   * The path can only be written once.
   *
   * @property NotUpdatable
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  NotUpdatable: class NotUpdatableError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; cannot be updated, got &quot;${meta.value}&quot;&#x60;;
    }
  },

  /**
   * The path cannot be filtered.
   *
   * @property NotFilterable
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  NotFilterable: class NotFilterableError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; cannot be filtered&#x60;;
    }
  },

  /**
   * The path cannot be populated.
   *
   * @property NotPopulable
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  NotPopulable: class NotPopulableError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; cannot be populated&#x60;;
    }
  },

  /**
   * The path is not a valid value for the enum.
   *
   * @property NotInEnum
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractBadRequestError
   * @constructor
   */
  NotInEnum: class NotInEnumError extends AbstractBadRequestError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; must be one of &quot;${meta.expected.join(&#x27;, &#x27;)}&quot;, got &quot;${meta.value}&quot;&#x60;;
    }
  },

  /**
   * The path doesn&#x60;t support the operator.
   *
   * @property UnsupportedOperator
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractBadRequestError
   * @constructor
   */
  UnsupportedOperator: class UnsupportedOperatorError extends AbstractBadRequestError {
    static template(meta) {
      return &#x60;Path &quot;${meta.key}&quot; does not support operator &quot;${meta.operator}&quot;&#x60;;
    }
  },

  /**
   * The operators cannot be mixed.
   *
   * @property NotMixableOperators
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  NotMixableOperators: class NotMixableOperatorsError extends AbstractForbiddenError {
    static template(meta) {
      return &#x60;Operators &quot;${meta.operators.join(&#x27;, &#x27;)}&quot; cannot be mixed for path &quot;${meta.key}&quot;, please use either one or
       the other&#x60;;
    }
  },

  /**
   * The paths have a uniqueness constraint.
   *
   * @property UniquenessConstraintViolation
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractError
   * @constructor
   */
  UniquenessConstraintViolation: class UniqueConstraintViolationError extends AbstractError {
    get statusCode() { return Restypie.Codes.Conflict; }
    static template(meta) {
      meta.keys = meta.keys || {};
      let keys = Object.keys(meta.keys).map(function (key) {
        return key + &#x27; (&#x27; + meta.keys[key] + &#x27;)&#x27;;
      });
      return &#x60;Path(s) ${keys.join(&#x27;, &#x27;)} must be unique&#x60;;
    }
  },

  /**
   * The request is trying to access too many data. It needs more filtering.
   *
   * @property RequestOutOfRange
   * @type constructor
   * @static
   * @extends Restypie.TemplateErrors.AbstractForbiddenError
   * @constructor
   */
  RequestOutOfRange: class RequestOutOfRangeError extends AbstractForbiddenError {
    static template() {
      return &#x60;Request is trying to access too many data, try refining your filters&#x60;;
    }
  },
  
  
  InconsistentRequest: class InconsistentRequestError extends AbstractBadRequestError {
    static template(meta) {
      let message = &#x60;Request is not consistent, values for path &quot;${meta.key}&quot; don&#x27;t match :&#x60; +
        &#x60;&quot;${meta.filterValue}&quot; is different than &quot;${meta.bodyValue}&quot;.&#x60;;
      return message;
    }
  }

};
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
